<!DOCTYPE html>
<html>
  <head>
    <title>Space Invaders Study!</title>
  </head>
  <body>
    <h1> Game 4</h1>
    <iframe id="myIframe" allow="camera" width=1300 height=800></iframe>
    <p> </p>
    <p>Please click Next below once the GAME OVER screen appears. </p>
    <p> </p>
    <div id="Next" style="display:none">
        <a href="questions2.html"> Next </a> 
    </div>
</body>

<script>
    function showNext() { 
        document.getElementById("Next").style.display = "inline"; 
    }
    setTimeout("showNext()", 30000);

    function findGetParameter(parameterName) {
        var result = null,
            tmp = [];
        var items = location.search.substr(1).split("&");
        for (var index = 0; index < items.length; index++) {
            tmp = items[index].split("=");
            if (tmp[0] === parameterName) result = tmp[1];
        }
        return result;
    }
    let game_port = 8668;
    let mode = 1;
    let game_num = 4;
    let condition = findGetParameter('condition') ? findGetParameter('condition') : 'Z';
    let game_url = "http://localhost:"+game_port+"/";
    let player_id = findGetParameter('id') ? findGetParameter('id') : 'UNDEFINED';
    let full_url = game_url+"?id="+player_id+"&mode="+mode+"&game="+game_num+"&condition="+condition
    
    let myIframe = document.getElementById("myIframe")
    myIframe.src = full_url
</script>

    <script>
    var all_params = window.location.href.split('?')[1];
    var a = document.getElementsByTagName('a');
    for (var i=0; i < a.length; i++){
        a[i].href+="?";
        a[i].href+=all_params;
        console.log(a[i].href);
    }
    </script>
</html>